package newPackage;

import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.Select;
import org.testng.annotations.Test;

public class TestClass extends BaseClass{

	
	@Test
	public void loadWeb() throws InterruptedException { 
		
		WebElementClass webelement = new WebElementClass();
		
		webelement.dropBox(driver,"//*[@name='fromPort']","San Diego"); 
		
		webelement.dropBox(driver,"//*[@name='toPort']","Dublin"); 
		
		webelement.clickButton(driver,"//*[@value='Find Flights']"); 
		
		
		//Find cheapest price & row number
		
		List<WebElement> rows = driver.findElements(By.xpath("/html/body/div/table/tbody/tr"));
			
		List<WebElement> cols = driver.findElements(By.xpath("/html/body/div/table/thead/tr/th"));
		
		float lowestCost=0;
		int row_num=0;
		
		for (int i=1; i<=rows.size(); ++i) {
			if (i==1) {
				lowestCost=Float.parseFloat(driver.findElement(By.xpath("/html/body/div/table/tbody/tr[" + i + "]/td[" + cols.size() + "]")).getText().replace("$", ""));
				row_num=i;
				}
			else {
				if (lowestCost > Float.parseFloat(driver.findElement(By.xpath("/html/body/div/table/tbody/tr[" + i + "]/td[" + cols.size() + "]")).getText().replace("$", ""))) {
					
					lowestCost=Float.parseFloat(driver.findElement(By.xpath("/html/body/div/table/tbody/tr[" + i + "]/td[" + cols.size() + "]")).getText().replace("$", ""));
					row_num=i;
					}		
				}
			}
		
		
		// Choose flight
		String flightToSelect = "/html/body/div/table/tbody/tr[" + row_num + "]/td[1]";
		webelement.clickButton(driver,flightToSelect);
		
		// Fill Customer details
		webelement.setText(driver, "//*[@id='inputName']", "Nabaita Paul");
		webelement.setText(driver, "//*[@id='address']", "Dodda Kammanahalli");
		webelement.setText(driver, "//*[@id='city']", "Bangalore");
		webelement.setText(driver, "//*[@id='state']", "Karnataka");
		webelement.setText(driver, "//*[@id='zipCode']", "560076");
		webelement.setText(driver, "//*[@id='creditCardNumber']", "2222333388881111");
		webelement.setText(driver, "//*[@id='creditCardMonth']", "08");
		webelement.setText(driver, "//*[@id='creditCardYear']", "2023");
		webelement.setText(driver, "//*[@id='nameOnCard']", "Nabaita Paul");
		
		Thread.sleep(10000);
		
		
/*		driver.get("http://e.ggtimer.com/");
		driver.manage().window().maximize();
		Thread.sleep(1000);
		
		int timeinSecs=10;
		// Enter time
		WebElement txtPlaceholder = driver.findElement(By.xpath("//*[@id=\"EggTimer-start-time-input-text\"]"));
		txtPlaceholder.sendKeys(String.valueOf(timeinSecs));
		
		// Click Start
		WebElement btnStart = driver.findElement(By.xpath("//*[@data-for=\"startpage\"]"));
		btnStart.click();
		
		int lasttime=timeinSecs;
		int counter=0;
		System.out.println("Timer" + "   " + "Decrement by(secs)");
		System.out.println("===========================================================");
		for (int i=timeinSecs;i>0;i--) {
			counter = Integer.parseInt(driver.findElement(By.xpath("//*[@class=\"ClassicTimer-time\"]/span")).getText().replace(" seconds", "").replace(" second", ""));
			System.out.println(driver.findElement(By.xpath("//*[@class=\"ClassicTimer-time\"]/span")).getText() + "   " + (lasttime-counter));
			lasttime=counter;
			Thread.sleep(1000);
			if (counter == 0) {
				driver.switchTo().alert().accept();
			}
		}*/
		
	}

	

	

}
